#rokey실습
[[로봇 프로젝트]]

[[Drawing 2024-12-02 13.07.11.excalidraw]]

전지윤

# 칼만 필터
1. **노이즈 처리:**
    
    - 측정 데이터(관측치)와 시스템 모델은 항상 노이즈(오차)를 포함합니다.
    - 칼만 필터는 **측정 노이즈**와 **모델 노이즈**를 고려해 가장 신뢰할 수 있는 값을 추정합니다.
2. **재귀적 알고리즘:**
    
    - 새로운 데이터가 들어올 때마다 계산을 갱신하며, 이전 계산 결과를 재활용하므로 실시간으로 작동할 수 있습니다.

칼만 필터는 두 단계로 나뉩니다:

1. **예측 단계(Prediction):**
    
    - 시스템 모델을 사용해 다음 상태를 예측합니다.
    - 상태 예측: x^k∣k−1=Fkx^k−1∣k−1+Bkukx^k∣k−1​=Fk​x^k−1∣k−1​+Bk​uk​
    - 공분산 예측: Pk∣k−1=FkPk−1∣k−1FkT+QkPk∣k−1​=Fk​Pk−1∣k−1​FkT​+Qk​
        - FkFk​: 상태 전이 행렬 (시스템 모델)
        - BkBk​: 제어 입력 행렬
        - ukuk​: 제어 입력
        - QkQk​: 프로세스 노이즈 공분산 행렬
2. **갱신 단계(Update):**
    
    - 관측 데이터를 기반으로 예측값을 보정합니다.
    - 칼만 이득 계산: Kk=Pk∣k−1HkT(HkPk∣k−1HkT+Rk)−1Kk​=Pk∣k−1​HkT​(Hk​Pk∣k−1​HkT​+Rk​)−1
    - 상태 업데이트: x^k∣k=x^k∣k−1+Kk(zk−Hkx^k∣k−1)x^k∣k​=x^k∣k−1​+Kk​(zk​−Hk​x^k∣k−1​)
    - 공분산 업데이트: Pk∣k=(I−KkHk)Pk∣k−1Pk∣k​=(I−Kk​Hk​)Pk∣k−1​
        - HkHk​: 관측 모델 행렬
        - RkRk​: 측정 노이즈 공분산 행렬
        - zkzk​: 측정값 (관측 데이터)
        - KkKk​: 칼만 이득 (예측값과 관측값을 조합하는 가중치)

### **LiDAR와 카메라 센서 퓨전에서 칼만 필터의 역할**

1. **동적 객체 추적 (Dynamic Object Tracking)**
    
    - 자율주행 차량이나 로봇에서, LiDAR와 카메라를 사용하여 움직이는 객체(예: 차량, 보행자)를 추적할 때 칼만 필터가 유용합니다.
    - **사용 이유:**
        - LiDAR는 거리와 3D 좌표 정보를 정확히 제공하지만, 측정 주기가 길고 데이터의 밀도에 따라 오류가 있을 수 있습니다.
        - 카메라는 색상 및 물체 식별 정보를 제공하지만, 정확한 거리 정보는 부족합니다.
        - 칼만 필터는 이러한 두 센서 데이터를 결합하여 객체의 **위치, 속도** 등을 예측하고 갱신합니다.

- Interpolate: 보간법
- Deep Sensor Fusion


truncation : 화각 때문에 가려진
occlution: 화각은 담는데 다른 물체에 가려진

다른 프레임에 있지만 같은 물체면 id가 같게 merge 해야함. id 지정하고 v키 눌러도 되긴함

3d 라벨링 같은 경우 box로 만들어야함. 근데 이게 방향도 중요함.
보간으로 어느 정도 해결 가능

라이다 range도 지정


구조화가 목적


